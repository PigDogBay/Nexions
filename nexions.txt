#program nexions  10 RUN AT 3  20 REM MPD Bailey 4 Jan 2024  30 REM Nexions 100 PROC initVars() 110 PROC initLayers() 120 PROC initSprites() 210 @gameLoop: PROC handleInput() 220 PROC update() 230 PROC display() 240 PROC bomb() 490 GO TO @gameLoop 990 STOP 1000 DEFPROC s()1010 PRINT "Saving basic code"1020 CLEAR : SAVE "NEXIONS.bas"1030 CAT EXP : PWD 1090 ENDPROC 1190 REM 1200 DEFPROC initLayers()1210 LAYER 0: BORDER 0: PAPER 0: INK 7: CLS 1215 LAYER OVER 61220 LAYER 2,1: LAYER ERASE 0,0,256,1921230 PROC title()1250 LOAD "stars.sl2" LAYER 1260 ENDPROC 1390 REM 1400 DEFPROC initSprites()1405 BANK NEW bankId1410 LOAD "sprites.spr" BANK bankId1430 SPRITE CLEAR 1440 SPRITE BANK bankId1450 SPRITE PRINT 1:;Enable sprites1460 SPRITE STOP 1470 PROC nextEnemy()1490 ENDPROC 1590 REM 1600 DEFPROC initVars()1610 %x=%152:;Space ship x position1620 %y=%210:;Space ship y position1630 %l=0:;Layer y position1640 %m=7:;Missile sprite ID 7,8,9 1650 %a=0:;Press count1660 score=0:lives=31690 ENDPROC 1790 REM 1800 DEFPROC handleInput()1810 LOCAL %p = INPUT 1| INPUT 01820 IF %p&1 THEN %x+=21830 IF %p&2 THEN %x-=21840 IF %p&$10 THEN %a+=1 : ELSE %a=01850 IF %a=1 THEN PROC fire()1860 IF %x<32 THEN %x=%321870 IF %x>271 THEN %x=%2721890 ENDPROC 2000 DEFPROC display()2010 SPRITE %0,%x,%y,%0,%@11012020 SPRITE MOVE INT 2030 LAYER AT %0,%l2190 ENDPROC 2400 DEFPROC update()2405 LOCAL %h2410 %l-=12420 IF %l=-1 THEN %l=1912430 FOR %i=%7 TO 92450 %h= SPRITE OVER (%i,10 TO 20,%7,%7) 2460 IF %h>0 THEN PROC destroyEnemy(%h,%i)2470 NEXT %i2500 IF SPRITE OVER (%0,20 TO 24,%7,%2) THEN PROC loseLife() 2690 ENDPROC 2800 DEFPROC fire()2810 IF SPRITE 9 THEN ENDPROC :; 3 missiles flying2830 BEEP .1,02840 SPRITE %m,%x,%200,%4,12850 SPRITE CONTINUE %m,%x,0 TO %200 STEP -8 RUN ,%4,32860 %m+=%1: IF %m>9 THEN %m=72990 ENDPROC 3200 DEFPROC nextEnemy()3210 %k=53220 FOR %i=0 TO %k-13240 SPRITE %10+i,%30 + RND 200,%30 + RND 100,%5,13250 SPRITE CONTINUE %10+i,30 TO 230 STEP 1 RUN ,30 TO 150 STEP 2 RUN ,%7,03260 NEXT %i3400 ENDPROC 3500 DEFPROC destroyEnemy(%s,%b)3510 SPRITE %s,0,0,0,0: SPRITE %b,0,0,0,03520 %k-=13530 BEEP .1,-53540 IF %k=0 THEN PROC nextEnemy()3550 score+=503560 LAYER 0: PRINT AT 0,0;score3570 LAYER 2,13700 ENDPROC 4000 DEFPROC bomb()4005 PRIVATE bomb=04010 LOCAL %x,%y 4015 sId = bomb+10:bId=20+bomb4020 IF NOT SPRITE sId OR SPRITE bId THEN GO TO 4150 4030 IF % RND 20<>5 THEN GO TO 4150 4040 %x = SPRITE AT (sId,0)4050 %y = SPRITE AT (sId,1)4060 SPRITE bId,%x,%y,%5,14070 SPRITE CONTINUE bId,,%x TO 200 STEP 2 RUN ,%5,34150 bomb+=1: IF bomb=5 THEN bomb =04200 ENDPROC 4500 DEFPROC loseLife()4510 BEEP 0.5,-604700 ENDPROC 6000 DEFPROC title()6010 LOAD "title.sl2" LAYER 6020 PAUSE 06030 ENDPROC 